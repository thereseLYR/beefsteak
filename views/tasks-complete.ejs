<!DOCTYPE html>
<html>

<head>
  <%- include('./partials/head.ejs') %>
</head>

<body>
  <div id="cover"></div>
  <%- include('./partials/navbar.ejs') %>

  <div>
    <h1 class="text-center"><%= listData[0]['list_name'] %></h1>
  </div>
  <div>
    <p class="text-center text-muted">
      <%= listData[0]['list_description'] %>
    </p>
    <p class="text-center text-muted">
      <!-- need to grab the name instead of ID -->
      By @<%= userData[0]['user_name'] %>
    </p>
  </div>

  <div class="mx-5">
    <table class="table table-danger table-hover">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Task Description</th>
          <th scope="col">Completed?</th>
          <th scope="col">Duration</th>
        </tr>
      </thead>
      <tbody>
        <% for(let i = 0; i < taskData.length; i += 1) { %>
        <tr>
          <th scope="row"><%= i + 1 %> </th>
          <td><%= taskData[i]['task_name'] %> </td>
          <% if(taskData[i]['completion_status'] == true) { %>
          <td>‚úî</td>
          <td><%= taskData[i]['duration']['minutes'] %>:<%= taskData[i]['duration']['seconds'] %> </td>
          <% } else { %>
          <td>‚ùå</td>
          <td></td>
          <% } %>
        </tr>
        <% } %>
      </tbody>
    </table>

    <!-- try to render these buttons only if user is logged in -->
    <% if(userEditStatus == true){ %>
    <div class="d-grid gap-2">

      <form action="/complete/list/:listID/edit?_method=PUT" method="POST">
        <input type="hidden">
        <label class="d-grid gap-2">
          <input class="btn btn-info" type="submit" value="Edit ‚úè">
        </label>
      </form>

      <form id="submitButton" action="/complete/list/:listID/delete?_method=DELETE" method="POST">
        <input type="hidden">
        <label class="d-grid gap-2">
          <input class="btn btn-danger" type="submit" value="Delete üö´">
        </label>
      </form>
    </div>
    <% } %>

  </div>



  <!-- Optional JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

  <script>
    window.onload = function() {
      localStorage.clear() // remove timer information from previous inprogress page
    }
  </script>
</body>

</html>